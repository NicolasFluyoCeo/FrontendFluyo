(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{285:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var s=r(5155),n=r(2115),o=r(9708),a=r(2085),i=r(9434);let c=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef((e,t)=>{let{className:r,variant:n,size:a,asChild:l=!1,...d}=e,u=l?o.DX:"button";return(0,s.jsx)(u,{className:(0,i.cn)(c({variant:n,size:a,className:r})),ref:t,...d})});l.displayName="Button"},2101:(e,t,r)=>{"use strict";r.d(t,{O:()=>d,A:()=>u});var s=r(5155),n=r(2115),o=r(3464);let a="http://localhost:8000/api",i={async login(e){let t=new URLSearchParams;return t.append("grant_type","password"),t.append("username",e.username),t.append("password",e.password),t.append("scope",""),t.append("client_id","string"),t.append("client_secret","string"),(await o.A.post("".concat(a,"/auth/login"),t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data},refreshToken:async e=>(await o.A.post("".concat(a,"/auth/refresh"),{refresh_token:e},{headers:{"Content-Type":"application/json"}})).data,setTokens(e,t){localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",t)},getTokens:()=>({access_token:localStorage.getItem("access_token"),refresh_token:localStorage.getItem("refresh_token")}),clearTokens(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")},isAuthenticated:()=>!!localStorage.getItem("access_token")};var c=r(5695);let l=(0,n.createContext)(void 0);function d(e){let{children:t}=e,[r,o]=(0,n.useState)(!1),a=(0,c.useRouter)();(0,n.useEffect)(()=>{o(i.isAuthenticated())},[]);let d=async(e,t)=>{try{let r=await i.login({username:e,password:t});i.setTokens(r.access_token,r.refresh_token),o(!0),a.push("/dashboard")}catch(e){throw console.error("Login failed:",e),e}};return(0,s.jsx)(l.Provider,{value:{isAuthenticated:r,login:d,logout:()=>{i.clearTokens(),o(!1),a.push("/login")}},children:t})}function u(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2414:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(5155),n=r(2115),o=r(5695),a=r(2101);function i(e){let{children:t}=e,{isAuthenticated:r}=(0,a.A)(),i=(0,o.useRouter)();return((0,n.useEffect)(()=>{r||i.push("/login")},[r,i]),r)?(0,s.jsx)(s.Fragment,{children:t}):null}var c=r(285);function l(){let{logout:e}=(0,a.A)();return(0,s.jsx)(i,{children:(0,s.jsx)("div",{className:"min-h-screen p-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Dashboard"}),(0,s.jsx)(c.$,{onClick:e,variant:"outline",children:"Logout"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Welcome to your dashboard!"}),(0,s.jsx)("p",{className:"text-gray-600",children:"This is a protected page. You can only see this if you're logged in."})]})]})})})}},3561:(e,t,r)=>{Promise.resolve().then(r.bind(r,2414))},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>o});var s=r(2596),n=r(9688);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[514,464,441,684,358],()=>t(3561)),_N_E=e.O()}]);