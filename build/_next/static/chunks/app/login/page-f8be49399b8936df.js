(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{285:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var s=r(5155),a=r(2115),n=r(9708),o=r(2085),i=r(9434);let d=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,t)=>{let{className:r,variant:a,size:o,asChild:l=!1,...c}=e,u=l?n.DX:"button";return(0,s.jsx)(u,{className:(0,i.cn)(d({variant:a,size:o,className:r})),ref:t,...c})});l.displayName="Button"},2101:(e,t,r)=>{"use strict";r.d(t,{O:()=>c,A:()=>u});var s=r(5155),a=r(2115),n=r(3464);let o="http://localhost:8000/api",i={async login(e){let t=new URLSearchParams;return t.append("grant_type","password"),t.append("username",e.username),t.append("password",e.password),t.append("scope",""),t.append("client_id","string"),t.append("client_secret","string"),(await n.A.post("".concat(o,"/auth/login"),t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data},refreshToken:async e=>(await n.A.post("".concat(o,"/auth/refresh"),{refresh_token:e},{headers:{"Content-Type":"application/json"}})).data,setTokens(e,t){localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",t)},getTokens:()=>({access_token:localStorage.getItem("access_token"),refresh_token:localStorage.getItem("refresh_token")}),clearTokens(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")},isAuthenticated:()=>!!localStorage.getItem("access_token")};var d=r(5695);let l=(0,a.createContext)(void 0);function c(e){let{children:t}=e,[r,n]=(0,a.useState)(!1),o=(0,d.useRouter)();(0,a.useEffect)(()=>{n(i.isAuthenticated())},[]);let c=async(e,t)=>{try{let r=await i.login({username:e,password:t});i.setTokens(r.access_token,r.refresh_token),n(!0),o.push("/dashboard")}catch(e){throw console.error("Login failed:",e),e}};return(0,s.jsx)(l.Provider,{value:{isAuthenticated:r,login:c,logout:()=>{i.clearTokens(),n(!1),o.push("/login")}},children:t})}function u(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8994:(e,t,r)=>{Promise.resolve().then(r.bind(r,9036))},9036:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(5155),a=r(2115),n=r(2101),o=r(285),i=r(9434);let d=a.forwardRef((e,t)=>{let{className:r,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});d.displayName="Input";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...a})});l.displayName="Card";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...a})});c.displayName="CardHeader";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("font-semibold leading-none tracking-tight",r),...a})});u.displayName="CardTitle";let f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})});f.displayName="CardDescription";let m=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...a})});function p(){let[e,t]=(0,a.useState)(""),[r,i]=(0,a.useState)(""),[p,h]=(0,a.useState)(""),{login:g}=(0,n.A)(),x=async t=>{t.preventDefault(),h("");try{await g(e,r)}catch(e){h("Invalid credentials. Please try again.")}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,s.jsxs)(l,{className:"w-[400px]",children:[(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{children:"Login"}),(0,s.jsx)(f,{children:"Enter your credentials to access your account"})]}),(0,s.jsx)(m,{children:(0,s.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"username",className:"text-sm font-medium",children:"Username"}),(0,s.jsx)(d,{id:"username",type:"text",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"password",className:"text-sm font-medium",children:"Password"}),(0,s.jsx)(d,{id:"password",type:"password",value:r,onChange:e=>i(e.target.value),required:!0})]}),p&&(0,s.jsx)("div",{className:"text-red-500 text-sm",children:p}),(0,s.jsx)(o.$,{type:"submit",className:"w-full",children:"Login"})]})})]})})}m.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(2596),a=r(9688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[514,464,441,684,358],()=>t(8994)),_N_E=e.O()}]);